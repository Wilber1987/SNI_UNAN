@page
@using SNI_UI2.Controllers;
@using CAPA_NEGOCIO.Security;
@{
    if (!SecurityController.IsAdmin())
    {
        Response.Redirect("./login");
        return;
    }
}

<script type="module">
    import { WRender, WArrayF, ComponentsManager, WAjaxTools } from '../WDevCore/WModules/WComponentsTools.js';
    import { WCssClass } from '../WDevCore/WModules/WStyledRender.js';
    import { WSecurity } from "../WDevCore/WModules/WSecurity.js";
    import { StyleScrolls } from "../WDevCore/StyleModules/WStyleComponents.js";
    import { WAppNavigator } from "../WDevCore/WComponents/WAppNavigator.js";
    Header.append(new WAppNavigator({
        Inicialize: false,
        DisplayMode: "right",
        Elements: [
            {
                name: "Home", url: "#",
                action: async (ev) => {
                    window.location = location.origin + "/";
                }
            }, {
                name: "Perfil", url: "#",
                action: (ev) => {
                    window.location = location.origin + "/Perfil/PerfilView";
                }
            }, {
                name: "Cerrar Sesión", url: "#",
                action: (ev) => {
                    WSecurity.LogOut();
                }
            }
        ]
    }));
    AdminTemplate.append(WRender.createElement(StyleScrolls));
</script>
@if (SecurityController.HavePermission(PermissionsEnum.ADMINISTRAR_POSTULANTES.ToString()))
{
    <script src="~/Admin/AdminInvestigadores.js" type="module"></script>
}
@if (SecurityController.HavePermission(PermissionsEnum.ADMINISTRAR_INVESTIGACIONES.ToString()))
{
    <script src="~/Admin/AdminInvestigaciones.js" type="module"></script>
}
@if (SecurityController.HavePermission(PermissionsEnum.ADMINISTRAR_USUARIOS.ToString()))
{
    <script src="~/Admin/AdminSecurity.js" type="module"></script>
}
@if (SecurityController.HavePermission(PermissionsEnum.ADMINISTRAR_CATALOGOS.ToString()))
{
    <script src="~/Admin/AdminNavigator.js" type="module"></script>
}
